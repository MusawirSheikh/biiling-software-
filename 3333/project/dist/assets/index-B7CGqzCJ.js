(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))c(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&c(l)}).observe(document,{childList:!0,subtree:!0});function r(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(t){if(t.ep)return;t.ep=!0;const n=r(t);fetch(t.href,n)}})();function f(e){document.getElementById(e).valueAsDate=new Date}function a(e,o,r){const c=e*o,t=c*r/100;return{subtotal:c,discountAmount:t,total:c-t}}function s(e){return"$"+e.toFixed(2)}function m(){const o=document.getElementById("invoiceBody").insertRow();o.innerHTML=`
    <td><input type="text" class="description" placeholder="Item description"></td>
    <td><input type="number" class="qty" value="0" onchange="window.handleRowChange(this)"></td>
    <td><input type="number" class="price" value="0" onchange="window.handleRowChange(this)"></td>
    <td><input type="number" class="discount" value="0" onchange="window.handleRowChange(this)"></td>
    <td class="total">$0.00</td>
    <td><button class="delete-btn" onclick="window.handleDeleteRow(this)">Ã—</button></td>
  `}function w(e){const o=parseFloat(e.querySelector(".qty").value)||0,r=parseFloat(e.querySelector(".price").value)||0,c=parseFloat(e.querySelector(".discount").value)||0,{total:t}=a(o,r,c);e.querySelector(".total").textContent=s(t)}function i(){let e=0,o=0;document.querySelectorAll("#invoiceBody tr").forEach(n=>{const l=parseFloat(n.querySelector(".qty").value)||0,u=parseFloat(n.querySelector(".price").value)||0,d=parseFloat(n.querySelector(".discount").value)||0,{subtotal:p,discountAmount:y}=a(l,u,d);e+=p,o+=y});const c=parseFloat(document.getElementById("prevBalance").value)||0,t=e-o+c;document.getElementById("subtotal").textContent=s(e),document.getElementById("totalDiscount").textContent=s(o),document.getElementById("grandTotal").textContent=s(t)}f("invoiceDate");window.handleRowChange=function(e){const o=e.closest("tr");w(o),i()};window.handleDeleteRow=function(e){e.closest("tr").remove(),i()};window.printInvoice=function(){window.print()};window.saveInvoice=function(){alert("Save functionality can be implemented based on your needs")};m();
